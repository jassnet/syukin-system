# ファイル構成

## プロジェクト構造

```
syukin-system/
├── app.py                    # メインアプリケーションファイル
├── requirements.txt          # Python依存パッケージ一覧
├── Procfile                  # PaaSデプロイ用設定
├── README.md                 # クイックスタートガイド
├── docs/                     # 詳細ドキュメント
│   ├── 00-目次.md
│   ├── 01-システム概要.md
│   ├── 02-認証・ログイン機能.md
│   ├── 03-ダッシュボード・出退勤機能.md
│   ├── 04-管理者機能（出退勤記録管理）.md
│   ├── 05-ユーザー管理機能.md
│   ├── 06-監査ログ機能.md
│   ├── 09-データベース構造.md
│   ├── 10-API・ルーティング.md
│   ├── 11-セキュリティ.md
│   ├── 12-デプロイメント.md
│   └── 13-ファイル構成.md
├── templates/                # Jinja2テンプレート
│   ├── layout.html           # ベースレイアウト
│   ├── login.html            # ログインページ
│   ├── dashboard.html        # ダッシュボード
│   ├── admin.html            # 管理者画面（出退勤記録）
│   ├── admin_users.html      # ユーザー管理画面
│   ├── admin_audit.html      # 監査ログ画面
│   └── shift_edit.html       # シフト編集画面
├── static/                   # 静的ファイル
│   └── style.css             # カスタムCSS
└── scripts/                  # セットアップスクリプト
    ├── setup_local.sh        # ローカル環境セットアップ
    └── run_local.sh          # ローカル環境起動
```

## 主要ファイル説明

### app.py

**役割**: メインアプリケーションファイル

**内容**:
- Flaskアプリケーション初期化
- データベースモデル定義
- ルーティング定義
- ビジネスロジック
- ヘルパー関数

**主要なセクション**:
- インポート・設定（1-50行目）
- データモデル（54-176行目）
- ヘルパー関数（178-266行目）
- ルーティング（266-948行目）
- CSVエクスポート（ヘルパー・管理画面連携）

**行数**: 約1000行

### requirements.txt

**役割**: Python依存パッケージ一覧

**主要パッケージ**:
- Flask==3.0.3
- Flask-Login==0.6.3
- Flask-SQLAlchemy==3.1.1
- SQLAlchemy==2.0.32
- psycopg2-binary==2.9.9
- gunicorn==21.2.0

### Procfile

**役割**: PaaSデプロイ用設定

**内容**:
```
web: gunicorn app:app
```

### templates/layout.html

**役割**: ベースレイアウトテンプレート

**機能**:
- HTML構造
- Bootstrap 5の読み込み
- ナビゲーションバー
- フラッシュメッセージ表示
- 共通CSS/JS

**継承**: すべてのテンプレートがこのレイアウトを継承

### templates/login.html

**役割**: ログインページ

**機能**:
- ユーザーID入力
- パスワード入力
- CSRFトークン
- エラーメッセージ表示

### templates/dashboard.html

**役割**: ダッシュボード

**機能**:
- 現在の出退勤状態表示
- 出退勤操作ボタン
- 最近の記録一覧

### templates/admin.html

**役割**: 管理者画面（出退勤記録管理）

**機能**:
- 出退勤記録一覧
- 日別集計
- 検索・フィルタ
- 編集モーダル（JavaScript）

**JavaScript**: シフト編集モーダルの処理が含まれる

### templates/admin_users.html

**役割**: ユーザー管理画面

**機能**:
- 新規ユーザー作成フォーム
- ユーザー一覧
- 編集モーダル
- 削除機能

### templates/admin_audit.html

**役割**: 監査ログ画面

**機能**:
- 監査ログ一覧
- フィルタ機能
- CSVエクスポートリンク

### templates/shift_edit.html

**役割**: シフト編集画面

**機能**:
- 出退勤時刻編集フォーム
- 時刻ショートカット
- 実働時間表示

### static/style.css

**役割**: カスタムCSS

**内容**:
- レスポンシブ対応
- テーブルスタイル
- カスタムスタイル

### scripts/setup_local.sh

**役割**: ローカル環境セットアップスクリプト

**処理**:
1. 仮想環境作成
2. 依存パッケージインストール
3. .envファイル作成（オプション）

### scripts/run_local.sh

**役割**: ローカル環境起動スクリプト

**処理**:
1. 仮想環境アクティベート
2. Flaskアプリ起動

## データベースファイル

### attendance.db（SQLite）

**場所**: プロジェクトルートまたは`instance/`フォルダ

**役割**: SQLiteデータベースファイル（開発環境）

**注意**: `.gitignore`に追加することを推奨

## 設定ファイル

### .env（オプション）

**役割**: 環境変数設定ファイル

**内容例**:
```
SECRET_KEY=your-secret-key
DATABASE_URL=sqlite:///attendance.db
TIMEZONE=Asia/Tokyo
```

**注意**: `.gitignore`に追加することを推奨

## ドキュメント

### README.md

**役割**: クイックスタートガイド

**内容**:
- プロジェクト概要
- セットアップ手順
- 使用方法
- トラブルシューティング

### docs/

**役割**: 詳細技術ドキュメント

**構成**: 機能ごとにファイル分割

## バージョン管理

### .gitignore（推奨）

```
__pycache__/
*.pyc
*.pyo
*.pyd
.Python
.venv/
venv/
env/
*.db
*.sqlite
instance/
.env
.DS_Store
```

## 関連ドキュメント

- [システム概要](01-システム概要.md) - 全体構成
- [API・ルーティング](10-API・ルーティング.md) - エンドポイント一覧
- [データベース構造](09-データベース構造.md) - データモデル

